<!DOCTYPE html>
<html lang="en" class="no-js" ng-app="myApp">
<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Savanna|HCI</title>
		<meta name="description" content="Human computer interaction" />
		<meta name="keywords" content="HCI, Application, Shoes, Clothing" />
		<meta name="author" content="Sarim" />
		<link rel="shortcut icon" href="../favicon.ico">

		<!--
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
		<link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
		-->
		<link rel="stylesheet" type="text/css" href="css/default.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />

        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.13/angular.min.js"></script>
		<script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.4.0.js"></script>
		
		<script src="https://code.jquery.com/jquery-1.9.1.js"></script>
		<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
		<script src="js/modernizr.custom.js"></script>
		<script type="text/javascript" src="tinybox.js"></script>

		<!-- Make sure my AngularJS calls our API as a "GET", rather than as an "OPTION"-->
		<script>
			var myApp = angular.module('myApp', []);
			myApp.config(['$httpProvider',
			function($httpProvider) {

				$httpProvider.defaults.useXDomain = true;
				delete $httpProvider.defaults.headers.common['X-Requested-With'];
			}]);
			function AngularController($scope, $http) {

				
				$scope.searchItem = null;

				$scope.cart = [];
				$scope.listOfProducts = null;

				$scope.loadcart = function() {
					var cartjson = [];
					var cartproducts = [];
					$scope.errorMessage += "test1 ";
					if (sessionStorage.getItem("cartdb") != null) {
						$scope.errorMessage += "--inside if--";
						cartjson = JSON.parse(sessionStorage.getItem("cartdb"));
						for (var j=0;j<cartjson.length; j++) {
							$scope.errorMessage += "--for--";
							var pid = cartjson[j].id;
							$scope.errorMessage += "--ProductID="+pid;
							$http.jsonp('http://api.zappos.com/Product/'+pid+'?callback=JSON_CALLBACK&key=12c3302e49b9b40ab8a222d7cf79a69ad11ffd78&includes=["styles","description"]').success(function(data) {
								$scope.errorMessage += "--SUCCESS=" + obj.length;
								var txt = data;
								var obj = txt.product;
								for(var i=0;i<obj.length;i++) {
									$scope.errorMessage += "--INSIDE SECOND FOR----=";
									var style = obj[i].styles;
									$scope.errorMessage += "pid" + obj[i].productID + "--name--" +obj[i].productName;
									var new_obj = {"pid":obj[i].productId, "name":obj[i].productName, "image":obj[i].defaultImageUrl,"price":style[0].price,};
									$scope.description = obj[i].description;
									cartproducts.push(new_obj);
								}
							}).error(function(data, status, headers, config) {
								$scope.errorMessage += "No product matching this search found, error # " + status;
								alert($scope.errorMessage);
							});
						}
						$scope.listOfProducts = cartproducts;
					} else {
						$scope.errorMessage = "cartdb is null ";
						alert($scope.errorMessage);
					}
					alert($scope.errorMessage);
				};
			}
		</script>
<body ng-controller="AngularController" ng-init="loadcart()">
<div data-role="page">
<div id="cbp-pgcontainer">

<li ng-repeat='product in listOfProducts'>
<br>
kongu
</br>
</li>
</div>
</div>
</body>
	<script src="js/cbpShop.min.js"></script>
		<script>
			var shop = new cbpShop(document.getElementById('cbp-pgcontainer'));
		</script>
</html>